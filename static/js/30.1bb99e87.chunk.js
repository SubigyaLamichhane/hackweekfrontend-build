(this["webpackJsonpjunctionapp-frontend"]=this["webpackJsonpjunctionapp-frontend"]||[]).push([[30],{1788:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),l=a(35),r=a(129),s=a(8),o=a(68),m=a(78),u=a(96),i=a(49),b=a(489),j=a(51),h=a(676),g=a(19),p=a(34),E=a(43),O=a(501),d=a(473),v=a(612),k=a(320),y=a(595),f=a(24),S=a.n(f),w=a(73),C=a(87),T=({event:e,projects:t})=>{const[a,l]=Object(c.useState)(""),r=Object(s.d)(),m=Object(s.e)(w.b);let u="registrationStartTime",i="registrationEndTime",b="startTime",j="endTime";m.location&&(i=Object(C.concatAndCapitalize)(i,m.location),u=Object(C.concatAndCapitalize)(u,m.location),b=Object(C.concatAndCapitalize)(b,m.location),j=Object(C.concatAndCapitalize)(j,m.location));const{byChallenge:f,byTrack:T}=Object(c.useMemo)(()=>t.reduce((e,t)=>(t.track&&(e.byTrack.hasOwnProperty(t.track)?e.byTrack[t.track].push(t):e.byTrack[t.track]=[t]),t.challenges&&t.challenges.forEach(a=>{e.byChallenge.hasOwnProperty(a)?e.byChallenge[a].push(t):e.byChallenge[a]=[t]}),e),{byChallenge:{},byTrack:{}}),[t]),F=Object(c.useCallback)(t=>{r(Object(o.e)(`/projects/${e.slug}/view/${t._id}`))},[r,e.slug]);return console.log(e),n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{event:e,subheading:"Project gallery"}),n.a.createElement(E.a,{center:!0},n.a.createElement(g.a,{mt:5}),S()(e[j]).isBefore()?n.a.createElement(y.a,{event:e}):"",n.a.createElement(g.a,{mt:5}),n.a.createElement(v.a,{event:e,active:a,onChange:l}),(()=>{switch(console.log("activeFilter :>> ",a),a){case"by-track":return e&&e.tracks?0===t.length?n.a.createElement(E.a,null,n.a.createElement(g.a,{mt:3,textAlign:"center",mb:3},n.a.createElement(p.a,{variant:"body"},"All the projects that are submitted by the participants will be displayed in this section of the page."))):e.tracks.map(t=>{const a=T[t.slug];if(!a)return null;const c=Object(h.a)(a,e=>-1*e.description.length);return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.a,{key:t.slug,projects:c.slice(0,3),count:a.length,event:e,label:t.name,moreLink:`/projects/${e.slug}/by-track/${t.slug}`}))}):null;case"by-challenge":return e&&e.challenges?e.challenges.map(t=>{const a=f[t.slug];if(!a)return null;const c=Object(h.a)(a,e=>-1*e.description.length);return n.a.createElement(d.a,{key:t.slug,projects:c.slice(0,3),count:a.length,event:e,label:t.name,subheading:"By "+t.partner,moreLink:`/projects/${e.slug}/by-challenge/${t.slug}`})}):null;default:return e?0===t.length?n.a.createElement(E.a,null,n.a.createElement(g.a,{mt:3,textAlign:"center",mb:3},n.a.createElement(p.a,{variant:"body"},"All the projects that are submitted by the participants will be displayed in this section of the page."))):n.a.createElement(E.a,null,n.a.createElement(k.a,{sortField:null,projects:t,event:e,onSelect:F})):null}})()))},F=a(1071),$=({event:e,projects:t})=>{const a=Object(s.d)(),r=Object(l.j)(),m=Object(c.useCallback)(t=>{a(Object(o.e)(`/projects/${e.slug}/view/${t._id}`))},[a,e.slug]),u=Object(c.useMemo)(()=>e&&e.tracks?Object(F.a)(e.tracks,e=>e.slug===r.params.track):null,[r,e]),i=Object(c.useMemo)(()=>{if(!u||!t)return[];const e=t.filter(e=>e.track===u.slug);return Object(h.a)(e,e=>-1*e.description.length)},[t,u]);return Object(c.useEffect)(()=>{window.scrollTo(0,0)},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{event:e,title:u.name,subheading:i.length+" projects"}),n.a.createElement(E.a,{center:!0},n.a.createElement(g.a,{mt:3}),n.a.createElement(p.a,{variant:"h4"},u.name),n.a.createElement(k.a,{sortField:null,projects:i,event:e,onSelect:m}),n.a.createElement(g.a,{mt:5})))},P=({event:e,projects:t})=>{const a=Object(s.d)(),r=Object(l.j)(),m=Object(c.useCallback)(t=>{a(Object(o.e)(`/projects/${e.slug}/view/${t._id}`))},[a,e.slug]),u=Object(c.useMemo)(()=>e&&e.challenges?Object(F.a)(e.challenges,e=>e.slug===r.params.challenge):null,[r,e]),i=Object(c.useMemo)(()=>{if(!u||!t)return[];const e=t.filter(e=>-1!==e.challenges.indexOf(u.slug));return Object(h.a)(e,e=>-1*e.description.length)},[t,u]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{event:e,title:u.partner,subheading:u.name}),n.a.createElement(E.a,{center:!0},n.a.createElement(g.a,{mt:3}),n.a.createElement(k.a,{sortField:null,projects:i,event:e,onSelect:m}),n.a.createElement(g.a,{mt:5})))},x=a(492),A=a(10),_=(a(53),a(346)),B=(a(66),a(41));a(487);var I=({event:e,showFullTeam:t})=>{const a=Object(s.d)(),r=Object(l.j)(),{projectId:u,token:i}=r.params,{slug:b}=e,[h,g]=Object(c.useState)(!1),[p,E]=Object(c.useState)(),[O,d]=Object(c.useState)(!0),[v,k]=Object(c.useState)(!1),[y,f]=(Object(s.e)(w.b),Object(s.e)(A.h),Object(c.useState)(!1));Object(c.useEffect)(()=>{i&&p&&e&&j.a.validateToken(b,i).then(e=>{e&&f(e)})},[e,p,b,i]);const[S,C]=Object(c.useState)({project:"",event:"",status:"submitted",score:0,maxScore:10,message:""});Object(c.useEffect)(()=>{i&&p&&e&&_.a.getScoreByEventSlugAndProjectIdAndPartnerToken(i,e.slug,p._id).then(e=>{e[0]&&(C(e[0]),g(!0))})},[e,i,p]);const T=Object(c.useCallback)(async()=>{d(!0);try{const e=await j.a.getPublicProjectById(u);E(e)}catch(e){k(!0)}finally{d(!1)}},[u]),F=Object(c.useCallback)(()=>{a(Object(o.c)())},[a]);return Object(c.useEffect)(()=>{T()},[T]),n.a.createElement(m.a,{loading:O,error:v},n.a.createElement(x.a,{project:p,event:e,onBack:F,showFullTeam:t,fetchProject:T,showTableLocation:!0,scores:S}))},M=a(1055),z=a(57),L=a(488),J=a(56);const D=Object(J.a)(e=>({wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around",padding:e.spacing(2)}}));var W=({event:e})=>{const t=D(),a=Object(l.j)(),r=Object(s.d)(),{slug:u}=e,{token:i}=a.params,[b,h]=Object(c.useState)({}),[p,O]=Object(c.useState)([]),[d,v]=Object(c.useState)([]),[y,f]=Object(c.useState)([]),[S,w]=Object(c.useState)(!0),[C,T]=Object(c.useState)(!1),F=Object(c.useCallback)(async()=>{w(!0);try{const e=await j.a.getChallengeProjectsWithToken(u,i);h(e),v(e.projects.filter(e=>"draft"===e.status)),f(e.projects.filter(e=>"final"===e.status)),O(e.projects)}catch(e){T(!0)}w(!1)},[u,i]);return Object(c.useEffect)(()=>{F()},[F]),b?n.a.createElement(m.a,{loading:S||!b,error:C,render:()=>n.a.createElement(E.a,{center:!0},n.a.createElement(L.a,{heading:b.challenge.name,subheading:b.projects.length+" projects"}),n.a.createElement(g.a,null,"FILTER"),n.a.createElement(M.a,null),n.a.createElement(z.a,{className:t.wrapper,container:!0,spacing:1},n.a.createElement(z.a,{item:!0,xs:4},n.a.createElement(B.a,{onClick:()=>{O(y)},variant:"outlined",color:"theme_lightgray"},"Final")),n.a.createElement(z.a,{item:!0,xs:4},n.a.createElement(B.a,{onClick:()=>{O(d)},variant:"outlined",color:"theme_lightgray"},"Draft")),n.a.createElement(z.a,{item:!0,xs:4},n.a.createElement(B.a,{onClick:()=>{O(b.projects)},variant:"outlined",color:"theme_lightgray"},"All"))),n.a.createElement(M.a,null),n.a.createElement(g.a,{height:20}),n.a.createElement(k.a,{projects:p,event:b.event,onSelect:e=>r(Object(o.e)(`${a.url}/view/${e._id}`)),showScore:!0,token:i}),n.a.createElement(g.a,{height:200}))}):null},G=({event:e})=>{const t=Object(l.j)(),a=Object(s.d)(),{slug:r}=e,{token:u}=t.params,[i,b]=Object(c.useState)({}),[h,p]=Object(c.useState)(!0),[O,d]=Object(c.useState)(!1),v=Object(c.useCallback)(async()=>{p(!0);try{const e=await j.a.getTrackProjectsWithToken(r,u);b(e)}catch(e){d(!0)}p(!1)},[r,u]);return Object(c.useEffect)(()=>{v()},[v]),i?n.a.createElement(m.a,{loading:h||!i,error:O,render:()=>n.a.createElement(E.a,{center:!0},n.a.createElement(L.a,{heading:i.track.name,subheading:i.projects.length+" projects"}),n.a.createElement(k.a,{projects:i.projects,event:i.event,onSelect:e=>a(Object(o.e)(`${t.url}/view/${e._id}`)),showScore:!0,token:u}),n.a.createElement(g.a,{height:200}))}):null},H=()=>{const e=Object(l.j)(),t=Object(s.d)(),{slug:a}=e.params,[r,h]=Object(c.useState)(!1),[g,p]=Object(c.useState)(!0),[E,O]=Object(c.useState)(),[d,v]=Object(c.useState)([]),k=Object(c.useCallback)(async()=>{p(!0);try{const[e,c]=await Promise.all([u.a.getPublicEventBySlug(a),j.a.getProjectsByEvent(a)]);e||t(Object(o.e)("/")),O(e),v(c)}catch(e){h(!0)}finally{p(!1)}},[t,a]);return Object(c.useEffect)(()=>{t(i.B(a)),t(i.E(a)),t(i.H(a)),t(b.r(a)),t(b.p(a)),t(b.s(a)),t(b.g(a)),t(i.G(a)),t(b.t(a)),t(b.u(a)),t(i.J(a)),t(i.C(a))},[a,t]),Object(c.useEffect)(()=>{k()},[k]),n.a.createElement(m.a,{loading:g,error:r},n.a.createElement(l.d,null,n.a.createElement(l.b,{path:e.url+"/challenge/:token/view/:projectId",component:({match:e})=>n.a.createElement(I,{event:E,match:e,showFullTeam:!0})}),n.a.createElement(l.b,{path:e.url+"/challenge/:token",component:({match:e})=>n.a.createElement(W,{projects:d,event:E,match:e})}),n.a.createElement(l.b,{path:e.url+"/tracks/:token/view/:projectId",component:({match:e})=>n.a.createElement(I,{event:E,match:e,showFullTeam:!0})}),n.a.createElement(l.b,{path:e.url+"/tracks/:token",component:({match:e})=>n.a.createElement(G,{projects:d,event:E,match:e})}),(null===E||void 0===E?void 0:E.galleryOpen)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.b,{path:e.url+"/view/:projectId",component:({match:e})=>n.a.createElement(I,{event:E,match:e})}),n.a.createElement(l.b,{path:e.url+"/by-track/:track",component:({match:e})=>n.a.createElement($,{projects:d,event:E,match:e})}),n.a.createElement(l.b,{path:e.url+"/by-challenge/:challenge",component:({match:e})=>n.a.createElement(P,{projects:d,event:E,match:e})}),n.a.createElement(l.b,{exact:!0,path:e.url,component:()=>n.a.createElement(T,{projects:d,event:E})})),n.a.createElement(l.a,{to:"/"})))};t.default=()=>{const e=Object(l.j)();return n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,null),n.a.createElement(l.d,null,n.a.createElement(l.b,{exact:!1,path:e.url+"/:slug",component:H}),n.a.createElement(l.a,{to:"/"})))}}}]);
//# sourceMappingURL=30.1bb99e87.chunk.js.map